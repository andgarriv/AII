{% extends 'base.html' %}

{% block style_css %}
table { border-collapse: collapse; width: 80%; }
th, td { border: 1px solid #999; padding: 6px 10px; text-align: left; }
th { background: #eee; }
.empty { color: #666; }
{% endblock %}

{% block encabezado %}
<h1>Vinos del año {{ anyo }}</h1>
{% endblock %}

{% block contenido %}
  {% if vinos %}
    <table>
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Precio</th>
          <th>Denominación</th>
          <th>Uvas</th>
        </tr>
      </thead>
      <tbody>
        {% for v in vinos %}
          <tr>
            <td>{{ v.nombre }}</td>
            <td>{% if v.precio %}€ {{ v.precio }}{% else %}-{% endif %}</td>
            <td>{% if v.denominacion %}{{ v.denominacion.nombre }}{% else %}Desconocida{% endif %}</td>
            <td>
              {% with uvas=v.uvas.all %}
                {% if uvas %}
                  {% for u in uvas %}{{ u.nombre }}{% if not forloop.last %}, {% endif %}{% endfor %}
                {% else %}
                  -
                {% endif %}
              {% endwith %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="empty">No se han encontrado vinos para el año {{ anyo }}.</p>
  {% endif %}

  <p><a href="/">Volver al inicio</a></p>
{% endblock %}
